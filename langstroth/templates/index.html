{% extends "base.html" %}

{% block content %}
<p class="lead">6 month average from {{ report_range }}</p>
<div class="row">
  <h2>Average</h2>
  <div id="averages">
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>OK</th>
          <th>Warning</th>
          <th>Unknown</th>
          <th>Critical</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="success">{{ average.ok }}</td>
          <td class="warning">{{ average.warning }}</td>
          <td class="active">{{ average.unknown }}</td>
          <td class="danger">{{ average.critical }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
<div class="row">
  <h2>Service breakdown</h2>
  <table id="modules" class="table table-striped table-bordered table-sorter">
    <thead>
      <tr>
        <th class="{sorter: 'percent'}">OK</th>
        <th class="{sorter: 'percent'}">Warning</th>
        <th class="{sorter: 'percent'}">Unknown</th>
        <th class="{sorter: 'percent'}">Critical</th>
        <th class="service">Service</th>
      </tr>
    </thead>
    <tbody>
      {% for service in services %}
      <tr>
        <td class="success">{{ service.ok }}</td>
        <td class="warning">{{ service.warning }}</td>
        <td class="active">{{ service.unknown }}</td>
        <td class="danger">{{ service.critical }}</td>
        <td class="service">{{ service.name }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}

{% block extra_script %}
<script src="{{ STATIC_URL }}js/jquery.tablesorter.js"></script>
<script src="{{ STATIC_URL }}js/jquery.metadata.js"></script>
<script type="text/javascript">
  $(document).ready(function()
  {
  $(".table-sorter").tablesorter({'cancelSelection': true});
  });
  $( "#show-all" ).click(function() {
  $("#modules tbody tr").removeClass("hidden");
  });
  $( "#show-changes" ).click(function() {
  $("#modules tbody tr.noupdates").addClass("hidden");
  });
</script>
{% endblock %}
